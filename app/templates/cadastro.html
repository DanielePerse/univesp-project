<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>iVenceu! - Cadastro de Funcionário</title>
  <meta name="description" content="Cadastre funcionários no sistema iVenceu! com informações pessoais e documentos necessários">
  <link rel="icon" type="image/png" href="{{ url_for('static', filename='image/faveicon.png') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" />
</head>
<body>
  <!-- Link para pular para conteúdo principal -->
  <a href="#main-content" class="skip-link">Pular para o conteúdo principal</a>
  <header role="banner" class="form-header" aria-labelledby="page-title">
    <div class="logo-section">
      <img src="{{ url_for('static', filename='image/logo.png') }}" alt="Logo da empresa iVenceu" style="width: 60px; height: 60px; margin-bottom: 10px;">
      <h1 id="page-title">IVENCEU!</h1>
      <p>Cadastro de Funcionário</p>
    </div>
  </header>

  <main id="main-content" role="main" class="form-container" aria-labelledby="cadastro-title">
    <h2 id="cadastro-title" class="sr-only">Formulário de Cadastro de Funcionário</h2>
    
    <!-- Área para anúncios de screen reader -->
    <div id="status-announcements" aria-live="polite" aria-atomic="true" class="sr-only"></div>
    <div id="error-announcements" aria-live="assertive" aria-atomic="true" class="sr-only"></div>
    
    <form id="cadastro-form" role="form" aria-labelledby="cadastro-title" novalidate>
      <fieldset>
        <legend class="sr-only">Informações Pessoais</legend>
        
        <div class="form-group">
          <label for="cpf" class="form-label">
            <span class="label-text">CPF</span>
            <span class="required" aria-label="campo obrigatório">*</span>
          </label>
          <input 
            type="text" 
            id="cpf" 
            name="cpf"
            required 
            placeholder="000.000.000-00" 
            class="input_register" 
            aria-describedby="cpf-help cpf-error"
            aria-invalid="false"
            autocomplete="off"
          />
          <div id="cpf-help" class="help-text">Digite apenas números ou com formatação xxx.xxx.xxx-xx</div>
          <div style="margin-top: 5px;">
            <button 
              type="button" 
              id="verificar-cpf-link" 
              class="link-button"
              aria-describedby="cpf-verification-help"
            >
              🔍 Verificar se CPF já está cadastrado
            </button>
            <div id="cpf-verification-help" class="help-text sr-only">
              Clique para verificar se o CPF já existe no sistema
            </div>
            <div id="cpf-status" class="status-message" aria-live="polite" style="display: none;"></div>
          </div>
          <div id="cpf-error" class="error-message" role="alert" aria-live="assertive"></div>
        </div>

        <div class="form-group">
          <label for="employee_name" class="form-label">
            <span class="label-text">Nome do funcionário</span>
            <span class="required" aria-label="campo obrigatório">*</span>
          </label>
          <input 
            type="text" 
            id="employee_name" 
            name="employee_name"
            required 
            class="input_register" 
            aria-describedby="employee-name-help employee-name-error"
            aria-invalid="false"
            autocomplete="name"
          />
          <div id="employee-name-help" class="help-text">Digite o nome completo do funcionário</div>
          <div id="employee-name-error" class="error-message" role="alert" aria-live="assertive"></div>
        </div>

        <div class="form-group">
          <label for="company_name" class="form-label">
            <span class="label-text">Nome da empresa</span>
            <span class="required" aria-label="campo obrigatório">*</span>
          </label>
          <input 
            type="text" 
            id="company_name" 
            name="company_name"
            required 
            class="input_register" 
            aria-describedby="company-name-help company-name-error"
            aria-invalid="false"
            autocomplete="organization"
          />
          <div id="company-name-help" class="help-text">Digite o nome da empresa onde o funcionário trabalha</div>
          <div id="company-name-error" class="error-message" role="alert" aria-live="assertive"></div>
        </div>
      </fieldset>

      <fieldset>
        <legend class="form-section-title">Endereço do Funcionário</legend>
        
        <div class="form-group">
          <label for="zip_code" class="form-label">
            <span class="label-text">CEP</span>
            <span class="required" aria-label="campo obrigatório">*</span>
          </label>
          <div class="input-with-button">
            <input 
              type="text" 
              id="zip_code" 
              name="zip_code"
              placeholder="00000-000" 
              class="input_register" 
              maxlength="9" 
              required
              aria-describedby="zip-code-help zip-code-error"
              aria-invalid="false"
              autocomplete="postal-code"
            />
            <button 
              type="button" 
              id="buscar-cep-btn" 
              class="button-secondary"
              aria-describedby="cep-search-help"
            >
              🔍 Buscar CEP
            </button>
          </div>
          <div id="zip-code-help" class="help-text">Digite o CEP no formato 00000-000 e clique em Buscar</div>
          <div id="cep-search-help" class="help-text sr-only">Busca automaticamente o endereço pelo CEP</div>
          <div id="cep-status" class="status-message" aria-live="polite" style="display: none;"></div>
          <div id="zip-code-error" class="error-message" role="alert" aria-live="assertive"></div>
        </div>
        
        <div class="form-group">
          <label for="street" class="form-label">
            <span class="label-text">Logradouro</span>
            <span class="required" aria-label="campo obrigatório">*</span>
          </label>
          <input 
            type="text" 
            id="street" 
            name="street"
            placeholder="Rua/Logradouro" 
            class="input_register" 
            readonly 
            required
            aria-describedby="street-help"
            autocomplete="street-address"
          />
          <div id="street-help" class="help-text">Este campo é preenchido automaticamente após buscar o CEP</div>
        </div>
        
        <div class="form-row">
          <div class="form-group form-group-small">
            <label for="number" class="form-label">
              <span class="label-text">Número</span>
              <span class="required" aria-label="campo obrigatório">*</span>
            </label>
            <input 
              type="text" 
              id="number" 
              name="number"
              placeholder="Número" 
              class="input_register" 
              required
              aria-describedby="number-help number-error"
              aria-invalid="false"
            />
            <div id="number-help" class="help-text">Número do endereço</div>
            <div id="number-error" class="error-message" role="alert" aria-live="assertive"></div>
          </div>
          
          <div class="form-group form-group-large">
            <label for="complement" class="form-label">
              <span class="label-text">Complemento</span>
              <span class="optional" aria-label="campo opcional">(opcional)</span>
            </label>
            <input 
              type="text" 
              id="complement" 
              name="complement"
              placeholder="Apartamento, bloco, etc." 
              class="input_register" 
              aria-describedby="complement-help"
            />
            <div id="complement-help" class="help-text">Informações complementares como apartamento, bloco, etc.</div>
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group form-group-half">
            <label for="neighborhood" class="form-label">
              <span class="label-text">Bairro</span>
              <span class="required" aria-label="campo obrigatório">*</span>
            </label>
            <input 
              type="text" 
              id="neighborhood" 
              name="neighborhood"
              placeholder="Bairro" 
              class="input_register" 
              readonly 
              required
              aria-describedby="neighborhood-help"
            />
            <div id="neighborhood-help" class="help-text">Preenchido automaticamente pelo CEP</div>
          </div>
          
          <div class="form-group form-group-half">
            <label for="city" class="form-label">
              <span class="label-text">Cidade</span>
              <span class="required" aria-label="campo obrigatório">*</span>
            </label>
            <input 
              type="text" 
              id="city" 
              name="city"
              placeholder="Cidade" 
              class="input_register" 
              readonly 
              required
              aria-describedby="city-help"
            />
            <div id="city-help" class="help-text">Preenchido automaticamente pelo CEP</div>
          </div>
        </div>
      </fieldset>

      <fieldset>
        <legend class="form-section-title">Documentos do Funcionário</legend>
        <div id="documents-container" role="group" aria-labelledby="documents-legend">
          <div id="documents-legend" class="sr-only">Lista de documentos do funcionário</div>
          
          <div class="document-entry" data-document-index="0">
            <div class="form-row">
              <div class="form-group form-group-large">
                <label for="document-name-0" class="form-label">
                  <span class="label-text">Nome do Documento</span>
                  <span class="required" aria-label="campo obrigatório">*</span>
                </label>
                <input 
                  type="text" 
                  id="document-name-0"
                  name="document-name-0"
                  class="document-name input_register" 
                  required 
                  placeholder="Ex: RG, CNH, Carteira de Trabalho"
                  aria-describedby="document-name-0-help document-name-0-error"
                  aria-invalid="false"
                />
                <div id="document-name-0-help" class="help-text">Digite o tipo do documento</div>
                <div id="document-name-0-error" class="error-message" role="alert" aria-live="assertive"></div>
              </div>
              
              <div class="form-group form-group-small">
                <label for="document-expiration-0" class="form-label">
                  <span class="label-text">Data de Vencimento</span>
                  <span class="required" aria-label="campo obrigatório">*</span>
                </label>
                <input 
                  type="date" 
                  id="document-expiration-0"
                  name="document-expiration-0"
                  class="document-expiration input_register" 
                  required
                  aria-describedby="document-expiration-0-help document-expiration-0-error"
                  aria-invalid="false"
                />
                <div id="document-expiration-0-help" class="help-text">Data de validade do documento</div>
                <div id="document-expiration-0-error" class="error-message" role="alert" aria-live="assertive"></div>
              </div>
            </div>
          </div>
        </div>

        <button 
          type="button" 
          id="add-document" 
          class="button-add-document"
          aria-describedby="add-document-help"
        >
          <span aria-hidden="true">+</span> Adicionar outro documento
        </button>
        <div id="add-document-help" class="help-text">Adiciona campos para cadastrar um documento adicional</div>
      </fieldset>

      <div class="form-actions" role="group" aria-labelledby="form-actions-title">
        <h3 id="form-actions-title" class="sr-only">Ações do formulário</h3>
        <div class="action-block">
          <button 
            type="submit" 
            id="submit-button"
            class="button_form button-primary"
            aria-describedby="submit-help"
          >
            <span class="button-text">Cadastrar Funcionário</span>
            <span class="loading-spinner sr-only" aria-hidden="true"></span>
          </button>
          <div id="submit-help" class="button-explanation">Salva todas as informações do funcionário no sistema</div>
        </div>
        <div class="action-block">
          <button 
            type="button" 
            class="button_form button-secondary" 
            onclick="goBack()"
            aria-describedby="back-help"
          >
            Voltar para Home
          </button>
          <div id="back-help" class="button-explanation">Retorna à página inicial sem salvar</div>
        </div>
      </div>
    </form>
  </main>

  <!-- Modal de Sucesso -->
  <div 
    id="success-modal" 
    class="modal hidden" 
    role="dialog" 
    aria-labelledby="success-modal-title"
    aria-describedby="success-modal-description"
    aria-modal="true"
  >
    <div class="modal-content">
      <h2 id="success-modal-title">Cadastro Realizado</h2>
      <p id="success-modal-description">Funcionário cadastrado com sucesso no sistema!</p>
      <div class="modal-actions">
        <button 
          type="button" 
          class="button_form button-secondary" 
          onclick="goBack()"
          autofocus
        >
          Voltar para Home
        </button>
      </div>
    </div>
  </div>

  <!-- Modal de Confirmação -->
  <div 
    id="confirm-modal" 
    class="modal hidden" 
    role="dialog" 
    aria-labelledby="confirm-modal-title"
    aria-describedby="confirm-modal-description"
    aria-modal="true"
  >
    <div class="modal-content">
      <h2 id="confirm-modal-title">Confirmar Cadastro</h2>
      <p id="confirm-modal-description">Tem certeza que deseja cadastrar este funcionário?</p>
      <div class="modal-actions">
        <button 
          type="button" 
          id="confirm-yes" 
          class="button_form button-primary"
          autofocus
        >
          Sim, cadastrar
        </button>
        <button 
          type="button" 
          id="confirm-no" 
          class="button_form button-secondary"
        >
          Cancelar
        </button>
      </div>
    </div>
  </div>

  <!-- Marca d'água -->
  <div style="position: fixed; bottom: 10px; left: 10px; color: rgba(0, 0, 0, 0.3); font-size: 12px; font-weight: 300; z-index: 1000;">
    Desenvolvido por Grupo PI II
  </div>

  <script src="{{ url_for('static', filename='js/utils.js') }}"></script>
  <script src="{{ url_for('static', filename='js/cadastro.js') }}"></script>
</body>
</html>
