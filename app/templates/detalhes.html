<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>iVenceu! - Detalhes do Funcion√°rio</title>
  <meta name="description" content="Visualize e edite informa√ß√µes detalhadas do funcion√°rio no sistema iVenceu!">
  <link rel="icon" type="image/png" href="{{ url_for('static', filename='image/faveicon.png') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" />
</head>
<body>
  <!-- Link para pular para conte√∫do principal -->
  <a href="#main-content" class="skip-link">Pular para o conte√∫do principal</a>
  <header role="banner" class="form-header" aria-labelledby="page-title">
    <div class="logo-section">
      <img src="{{ url_for('static', filename='image/logo.png') }}" alt="Logo da empresa iVenceu" style="width: 60px; height: 60px; margin-bottom: 10px;">
      <h1 id="page-title">IVENCEU!</h1>
      <p>Detalhes do Funcion√°rio</p>
    </div>
  </header>

  <main id="main-content" role="main" class="form-container" aria-labelledby="detalhes-title">
    <h2 id="detalhes-title" class="sr-only">Informa√ß√µes Detalhadas do Funcion√°rio</h2>
    
    <!-- √Årea para an√∫ncios de screen reader -->
    <div id="status-announcements" aria-live="polite" aria-atomic="true" class="sr-only"></div>
    <div id="error-announcements" aria-live="assertive" aria-atomic="true" class="sr-only"></div>

    <!-- √Årea de Loading -->
    <div id="loading-indicator" class="loading-container hidden" aria-live="polite">
      <div class="loading-spinner-large"></div>
      <p>Carregando dados do funcion√°rio...</p>
    </div>
    
    <form id="edit-form" role="form" aria-labelledby="detalhes-title" novalidate>
      <!-- Se√ß√£o de Informa√ß√µes Principais -->
      <section aria-labelledby="info-principal-title" class="employee-main-info">
        <h3 id="info-principal-title" class="sr-only">Informa√ß√µes Principais</h3>
        
        <div class="employee-info-layout">
          <div class="employee-photo-section">
            <figure class="employee-photo-container">
              <img 
                id="employee-photo"
                class="img_func" 
                src="{{ url_for('static', filename='image/Jose das Couves.png') }}" 
                alt="Foto do funcion√°rio"
                style="width: 150px; height: auto; border-radius: 12px;"
              />
              <figcaption class="sr-only">Foto do perfil do funcion√°rio</figcaption>
            </figure>
            
            <button 
              type="button" 
              id="change-photo-btn" 
              class="button-change-photo"
              aria-describedby="photo-help"
            >
              üì∑ Alterar Foto
            </button>
            <div id="photo-help" class="help-text sr-only">Clique para alterar a foto do funcion√°rio</div>
          </div>
          
          <fieldset class="employee-basic-info">
            <legend class="sr-only">Dados B√°sicos do Funcion√°rio</legend>
            
            <div class="form-row">
              <div class="form-group">
                <label for="cpf" class="form-label">
                  <span class="label-text">CPF</span>
                  <span class="required" aria-label="campo obrigat√≥rio">*</span>
                </label>
                <input 
                  type="text" 
                  id="cpf" 
                  name="cpf"
                  placeholder="000.000.000-00" 
                  required 
                  class="input_register"
                  aria-describedby="cpf-help cpf-error"
                  aria-invalid="false"
                  autocomplete="off"
                />
                <div id="cpf-help" class="help-text">CPF do funcion√°rio (somente leitura)</div>
                <div id="cpf-error" class="error-message" role="alert" aria-live="assertive"></div>
              </div>
              
              <div class="form-group">
                <label for="employee_name" class="form-label">
                  <span class="label-text">Nome do Funcion√°rio</span>
                  <span class="required" aria-label="campo obrigat√≥rio">*</span>
                </label>
                <input 
                  type="text" 
                  id="employee_name" 
                  name="employee_name"
                  placeholder="Digite o nome completo" 
                  required 
                  class="input_register"
                  aria-describedby="employee-name-help employee-name-error"
                  aria-invalid="false"
                  autocomplete="name"
                />
                <div id="employee-name-help" class="help-text">Nome completo do funcion√°rio</div>
                <div id="employee-name-error" class="error-message" role="alert" aria-live="assertive"></div>
              </div>
            </div>
            
            <div class="form-group">
              <label for="company_name" class="form-label">
                <span class="label-text">Empresa</span>
                <span class="required" aria-label="campo obrigat√≥rio">*</span>
              </label>
              <input 
                type="text" 
                id="company_name" 
                name="company_name"
                placeholder="Digite o nome da empresa" 
                required 
                class="input_register"
                aria-describedby="company-name-help company-name-error"
                aria-invalid="false"
                autocomplete="organization"
              />
              <div id="company-name-help" class="help-text">Empresa onde o funcion√°rio trabalha</div>
              <div id="company-name-error" class="error-message" role="alert" aria-live="assertive"></div>
            </div>
          </fieldset>
        </div>
      </section>

      <!-- Se√ß√£o de Endere√ßo -->
      <section aria-labelledby="endereco-title">
        <fieldset class="address-section">
          <legend id="endereco-title" class="form-section-title">Endere√ßo do Funcion√°rio</legend>
          
          <div class="form-group">
            <label for="zip_code" class="form-label">
              <span class="label-text">CEP</span>
              <span class="required" aria-label="campo obrigat√≥rio">*</span>
            </label>
            <div class="input-with-button">
              <input 
                type="text" 
                id="zip_code" 
                name="zip_code"
                placeholder="00000-000" 
                class="input_register" 
                maxlength="9" 
                required
                aria-describedby="zip-code-help zip-code-error"
                aria-invalid="false"
                autocomplete="postal-code"
              />
              <button 
                type="button" 
                id="buscar-cep-btn" 
                class="button-secondary"
                aria-describedby="cep-search-help"
              >
                üîç Buscar CEP
              </button>
            </div>
            <div id="zip-code-help" class="help-text">Digite o CEP no formato 00000-000 e clique em Buscar</div>
            <div id="cep-search-help" class="help-text sr-only">Busca automaticamente o endere√ßo pelo CEP</div>
            <div id="cep-status" class="status-message" aria-live="polite" style="display: none;"></div>
            <div id="zip-code-error" class="error-message" role="alert" aria-live="assertive"></div>
          </div>
          
          <div class="form-group">
            <label for="street" class="form-label">
              <span class="label-text">Logradouro</span>
              <span class="required" aria-label="campo obrigat√≥rio">*</span>
            </label>
            <input 
              type="text" 
              id="street" 
              name="street"
              placeholder="Rua/Logradouro" 
              class="input_register" 
              readonly 
              required
              aria-describedby="street-help"
              autocomplete="street-address"
            />
            <div id="street-help" class="help-text">Este campo √© preenchido automaticamente ap√≥s buscar o CEP</div>
          </div>
          
          <div class="form-row">
            <div class="form-group form-group-small">
              <label for="number" class="form-label">
                <span class="label-text">N√∫mero</span>
                <span class="required" aria-label="campo obrigat√≥rio">*</span>
              </label>
              <input 
                type="text" 
                id="number" 
                name="number"
                placeholder="N√∫mero" 
                class="input_register" 
                required
                aria-describedby="number-help number-error"
                aria-invalid="false"
              />
              <div id="number-help" class="help-text">N√∫mero do endere√ßo</div>
              <div id="number-error" class="error-message" role="alert" aria-live="assertive"></div>
            </div>
            
            <div class="form-group form-group-large">
              <label for="complement" class="form-label">
                <span class="label-text">Complemento</span>
                <span class="optional" aria-label="campo opcional">(opcional)</span>
              </label>
              <input 
                type="text" 
                id="complement" 
                name="complement"
                placeholder="Apartamento, bloco, etc." 
                class="input_register" 
                aria-describedby="complement-help"
              />
              <div id="complement-help" class="help-text">Informa√ß√µes complementares como apartamento, bloco, etc.</div>
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group form-group-half">
              <label for="neighborhood" class="form-label">
                <span class="label-text">Bairro</span>
                <span class="required" aria-label="campo obrigat√≥rio">*</span>
              </label>
              <input 
                type="text" 
                id="neighborhood" 
                name="neighborhood"
                placeholder="Bairro" 
                class="input_register" 
                readonly 
                required
                aria-describedby="neighborhood-help"
              />
              <div id="neighborhood-help" class="help-text">Preenchido automaticamente pelo CEP</div>
            </div>
            
            <div class="form-group form-group-half">
              <label for="city" class="form-label">
                <span class="label-text">Cidade</span>
                <span class="required" aria-label="campo obrigat√≥rio">*</span>
              </label>
              <input 
                type="text" 
                id="city" 
                name="city"
                placeholder="Cidade" 
                class="input_register" 
                readonly 
                required
                aria-describedby="city-help"
              />
              <div id="city-help" class="help-text">Preenchido automaticamente pelo CEP</div>
            </div>
          </div>
        </fieldset>
      </section>

      <!-- Se√ß√£o de Documentos -->
      <section aria-labelledby="documentos-title">
        <fieldset class="documents-section">
          <legend id="documentos-title" class="form-section-title">Documentos do Funcion√°rio</legend>
          
          <div id="documents-container" role="group" aria-labelledby="documentos-title">
            <!-- Campos de documentos ser√£o inseridos dinamicamente aqui -->
          </div>

          <div class="document-actions">
            <button 
              type="button" 
              id="add-document" 
              class="button-add-document"
              aria-describedby="add-document-help"
            >
              <span aria-hidden="true">+</span> Adicionar Documento
            </button>
            <div id="add-document-help" class="help-text">Adiciona campos para cadastrar um documento adicional</div>
          </div>
        </fieldset>
      </section>

      <!-- A√ß√µes do Formul√°rio -->
      <section class="form-actions" role="group" aria-labelledby="form-actions-title">
        <h3 id="form-actions-title" class="sr-only">A√ß√µes do formul√°rio</h3>
        <div class="action-buttons" style="display: flex; flex-wrap: wrap; gap: 16px; justify-content: center; align-items: flex-start; margin-top: 16px;">
          <div style="display: flex; flex-direction: column; align-items: center; max-width: 320px; width: 100%;">
            <button 
              type="submit" 
              id="save-button"
              class="button_form button-primary"
              aria-describedby="save-help"
              style="width: 100%;"
            >
              <span class="button-text">üíæ Salvar Altera√ß√µes</span>
              <span class="loading-spinner sr-only" aria-hidden="true"></span>
            </button>
            <div id="save-help" class="button-explanation" style="width: 100%; text-align: center; word-break: break-word; margin-top: 4px;">Salva todas as altera√ß√µes feitas nos dados do funcion√°rio</div>
          </div>
          <div style="display: flex; flex-direction: column; align-items: center; max-width: 320px; width: 100%;">
            <button 
              type="button" 
              class="button_form button-danger" 
              onclick="confirmCancel()"
              aria-describedby="cancel-help"
              style="width: 100%;"
            >
              ‚ùå Cancelar
            </button>
            <div id="cancel-help" class="button-explanation" style="width: 100%; text-align: center; word-break: break-word; margin-top: 4px;">Cancela as altera√ß√µes e retorna √† listagem</div>
          </div>
          <div style="display: flex; flex-direction: column; align-items: center; max-width: 320px; width: 100%;">
            <button 
              type="button" 
              id="delete-button"
              class="button_form button-danger" 
              onclick="confirmDelete()"
              aria-describedby="delete-help"
              style="width: 100%;"
            >
              üóëÔ∏è Excluir Funcion√°rio
            </button>
            <div id="delete-help" class="button-explanation" style="width: 100%; text-align: center; word-break: break-word; margin-top: 4px;">Remove permanentemente o funcion√°rio do sistema</div>
          </div>
          <div style="display: flex; flex-direction: column; align-items: center; max-width: 320px; width: 100%;">
            <button 
              type="button"
              onclick="window.location.href='/home'"
              class="button_form button-secondary"
              aria-describedby="back-home-help"
              style="width: 100%;"
            >
              <span aria-hidden="true">üè†</span> Voltar para Home
            </button>
            <div id="back-home-help" class="button-explanation" style="width: 100%; text-align: center; word-break: break-word; margin-top: 4px;">Retorna √† p√°gina inicial do sistema</div>
          </div>
        </div>
      </section>
    </form>
  </main>

  <!-- Modal de Sucesso -->
  <div 
    id="success-modal" 
    class="modal hidden" 
    role="dialog" 
    aria-labelledby="success-modal-title"
    aria-describedby="success-modal-description"
    aria-modal="true"
  >
    <div class="modal-content">
      <h2 id="success-modal-title">‚úÖ Sucesso</h2>
      <p id="success-modal-description">Funcion√°rio atualizado com sucesso!</p>
      <div class="modal-actions">
        <button 
          type="button" 
          class="button_form button-primary" 
          onclick="voltarParaConsulta()"
          autofocus
        >
          Voltar para Consulta
        </button>
      </div>
    </div>
  </div>

  <!-- Modal de Confirma√ß√£o de Cancelamento -->
  <div 
    id="cancel-modal" 
    class="modal hidden" 
    role="dialog" 
    aria-labelledby="cancel-modal-title"
    aria-describedby="cancel-modal-description"
    aria-modal="true"
  >
    <div class="modal-content">
      <h2 id="cancel-modal-title">‚ö†Ô∏è Confirmar Cancelamento</h2>
      <p id="cancel-modal-description">Tem certeza que deseja cancelar? Todas as altera√ß√µes n√£o salvas ser√£o perdidas.</p>
      <div class="modal-actions">
        <button 
          type="button" 
          id="confirm-cancel" 
          class="button_form button-danger"
          autofocus
        >
          Sim, cancelar
        </button>
        <button 
          type="button" 
          id="keep-editing" 
          class="button_form button-secondary"
        >
          Continuar editando
        </button>
      </div>
    </div>
  </div>

  <!-- Modal de Confirma√ß√£o de Exclus√£o -->
  <div 
    id="delete-modal" 
    class="modal hidden" 
    role="dialog" 
    aria-labelledby="delete-modal-title"
    aria-describedby="delete-modal-description"
    aria-modal="true"
  >
    <div class="modal-content">
      <h2 id="delete-modal-title">üö® Confirmar Exclus√£o</h2>
      <p id="delete-modal-description">
        <strong>ATEN√á√ÉO:</strong> Esta a√ß√£o n√£o pode ser desfeita!<br>
        Tem certeza que deseja excluir permanentemente este funcion√°rio e todos os seus documentos?
      </p>
      <div class="modal-actions">
        <button 
          type="button" 
          id="confirm-delete" 
          class="button_form button-danger"
        >
          üóëÔ∏è Sim, excluir permanentemente
        </button>
        <button 
          type="button" 
          id="cancel-delete" 
          class="button_form button-secondary"
          autofocus
        >
          Cancelar
        </button>
      </div>
    </div>
  </div>

  <script>
    // Define o ID do funcion√°rio para o script externo
    window.employeeId = "{{ employee_id }}";
  </script>
  <script src="{{ url_for('static', filename='js/utils.js') }}"></script>
  <script src="{{ url_for('static', filename='js/detalhes.js') }}"></script>

  <!-- Marca d'√°gua -->
  <div style="position: fixed; bottom: 10px; left: 10px; color: rgba(0, 0, 0, 0.3); font-size: 12px; font-weight: 300; z-index: 1000;">
    Desenvolvido por Grupo PI II
  </div>
</body>
</html>
